

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>Human Demonstrations &mdash; robosuite 1.2.1 documentation</title>
  

  
  <link rel="stylesheet" href="../static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../static/theme_overrides.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="../static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../static/documentation_options.js"></script>
        <script data-url_root="../" id="documentation_options" src="../static/documentation_options.js"></script>
        <script src="../static/jquery.js"></script>
        <script src="../static/underscore.js"></script>
        <script src="../static/doctools.js"></script>
        <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    
    <script type="text/javascript" src="../static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Sim-to-Real Transfer" href="sim2real.html" />
    <link rel="prev" title="Benchmarking" href="benchmarking.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> robosuite
          

          
          </a>

          
            
            
              <div class="version">
                1.2.1
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption" role="heading"><span class="caption-text">Introduction</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../overview.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../quickstart.html">Quick Start</a></li>
<li class="toctree-l1"><a class="reference internal" href="../demos.html">Demo Showcases</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Modules</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../modules/overview.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../modules/robots.html">Robots</a></li>
<li class="toctree-l1"><a class="reference internal" href="../modules/objects.html">Objects</a></li>
<li class="toctree-l1"><a class="reference internal" href="../modules/environments.html">Environments</a></li>
<li class="toctree-l1"><a class="reference internal" href="../modules/sensors.html">Sensors</a></li>
<li class="toctree-l1"><a class="reference internal" href="../modules/devices.html">I/O Devices</a></li>
<li class="toctree-l1"><a class="reference internal" href="../modules/renderers.html">Renderers</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Simulation API</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../simulation/robot.html">Robot</a></li>
<li class="toctree-l1"><a class="reference internal" href="../simulation/environment.html">Environment</a></li>
<li class="toctree-l1"><a class="reference internal" href="../simulation/device.html">Device</a></li>
<li class="toctree-l1"><a class="reference internal" href="../simulation/controller.html">Controller</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Modeling API</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../modeling/mujoco_model.html">Mujoco Model</a></li>
<li class="toctree-l1"><a class="reference internal" href="../modeling/robot_model.html">Robot Model</a></li>
<li class="toctree-l1"><a class="reference internal" href="../modeling/object_model.html">Object Model</a></li>
<li class="toctree-l1"><a class="reference internal" href="../modeling/arena.html">Arena</a></li>
<li class="toctree-l1"><a class="reference internal" href="../modeling/task.html">Task</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Source API</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../source/robosuite.html">robosuite package</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Algorithms</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="benchmarking.html">Benchmarking</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Human Demonstrations</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#collecting-human-demonstrations">Collecting Human Demonstrations</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#keyboard-controls">Keyboard controls</a></li>
<li class="toctree-l3"><a class="reference internal" href="#dconnexion-spacemouse-controls">3Dconnexion SpaceMouse controls</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#replaying-human-demonstrations">Replaying Human Demonstrations</a></li>
<li class="toctree-l2"><a class="reference internal" href="#existing-datasets">Existing Datasets</a></li>
<li class="toctree-l2"><a class="reference internal" href="#structure-of-collected-demonstrations">Structure of collected demonstrations</a></li>
<li class="toctree-l2"><a class="reference internal" href="#using-demonstrations-for-learning">Using Demonstrations for Learning</a></li>
<li class="toctree-l2"><a class="reference internal" href="#warnings">Warnings</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="sim2real.html">Sim-to-Real Transfer</a></li>
<li class="toctree-l1"><a class="reference internal" href="roboturk.html">RoboTurk Datasets</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Miscellaneous</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../references.html">Projects using robosuite</a></li>
<li class="toctree-l1"><a class="reference internal" href="../acknowledgement.html">Acknowledgements</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">robosuite</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>Human Demonstrations</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../sources/algorithms/demonstrations.md.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  
<style>
/* CSS overrides for sphinx_rtd_theme */

/* 24px margin */
.nbinput.nblast.container,
.nboutput.nblast.container {
    margin-bottom: 19px;  /* padding has already 5px */
}

/* ... except between code cells! */
.nblast.container + .nbinput.container {
    margin-top: -19px;
}

.admonition > p:before {
    margin-right: 4px;  /* make room for the exclamation icon */
}

/* Fix math alignment, see https://github.com/rtfd/sphinx_rtd_theme/pull/686 */
.math {
    text-align: unset;
}
</style>
<div class="section" id="human-demonstrations">
<h1>Human Demonstrations<a class="headerlink" href="#human-demonstrations" title="Permalink to this headline">¶</a></h1>
<div class="section" id="collecting-human-demonstrations">
<h2>Collecting Human Demonstrations<a class="headerlink" href="#collecting-human-demonstrations" title="Permalink to this headline">¶</a></h2>
<p>We provide teleoperation utilities that allow users to control the robots with input devices, such as the keyboard and the <a class="reference external" href="https://www.3dconnexion.com/spacemouse_compact/en/">SpaceMouse</a>. Such functionality allows us to collect a dataset of human demonstrations for learning. We provide an example script to illustrate how to collect demonstrations. Our <a class="reference external" href="https://github.com/ARISE-Initiative/robosuite/blob/master/robosuite/scripts/collect_human_demonstrations.py">collect_human_demonstrations</a> script takes the following arguments:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">directory:</span></code> path to a folder for where to store the pickle file of collected demonstrations</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">environment:</span></code> name of the environment you would like to collect the demonstrations for</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">device:</span></code> either “keyboard” or “spacemouse”</p></li>
</ul>
<div class="section" id="keyboard-controls">
<h3>Keyboard controls<a class="headerlink" href="#keyboard-controls" title="Permalink to this headline">¶</a></h3>
<p>Note that the rendering window must be active for these commands to work.</p>
<table border="1" class="docutils">
<thead>
<tr>
<th align="center">Keys</th>
<th align="center">Command</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">q</td>
<td align="center">reset simulation</td>
</tr>
<tr>
<td align="center">spacebar</td>
<td align="center">toggle gripper (open/close)</td>
</tr>
<tr>
<td align="center">w-a-s-d</td>
<td align="center">move arm horizontally in x-y plane</td>
</tr>
<tr>
<td align="center">r-f</td>
<td align="center">move arm vertically</td>
</tr>
<tr>
<td align="center">z-x</td>
<td align="center">rotate arm about x-axis</td>
</tr>
<tr>
<td align="center">t-g</td>
<td align="center">rotate arm about y-axis</td>
</tr>
<tr>
<td align="center">c-v</td>
<td align="center">rotate arm about z-axis</td>
</tr>
<tr>
<td align="center">ESC</td>
<td align="center">quit</td>
</tr>
</tbody>
</table></div>
<div class="section" id="dconnexion-spacemouse-controls">
<h3>3Dconnexion SpaceMouse controls<a class="headerlink" href="#dconnexion-spacemouse-controls" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<thead>
<tr>
<th align="center">Control</th>
<th align="center">Command</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">Right button</td>
<td align="center">reset simulation</td>
</tr>
<tr>
<td align="center">Left button (hold)</td>
<td align="center">close gripper</td>
</tr>
<tr>
<td align="center">Move mouse laterally</td>
<td align="center">move arm horizontally in x-y plane</td>
</tr>
<tr>
<td align="center">Move mouse vertically</td>
<td align="center">move arm vertically</td>
</tr>
<tr>
<td align="center">Twist mouse about an axis</td>
<td align="center">rotate arm about a corresponding axis</td>
</tr>
<tr>
<td align="center">ESC (keyboard)</td>
<td align="center">quit</td>
</tr>
</tbody>
</table></div>
</div>
<div class="section" id="replaying-human-demonstrations">
<h2>Replaying Human Demonstrations<a class="headerlink" href="#replaying-human-demonstrations" title="Permalink to this headline">¶</a></h2>
<p>We have included an example script that illustrates how demonstrations can be loaded and played back. Our <a class="reference external" href="https://github.com/ARISE-Initiative/robosuite/blob/master/robosuite/scripts/playback_demonstrations_from_hdf5.py">playback_demonstrations_from_hdf5</a> script selects demonstration episodes at random from a demonstration pickle file and replays them.</p>
</div>
<div class="section" id="existing-datasets">
<h2>Existing Datasets<a class="headerlink" href="#existing-datasets" title="Permalink to this headline">¶</a></h2>
<p>We have included some sample demonstrations for each task at <code class="docutils literal notranslate"><span class="pre">models/assets/demonstrations</span></code>.</p>
<p>Our twin project <a class="reference external" href="http://roboturk.stanford.edu">RoboTurk</a> has also collected pilot datasets of more than a thousand demonstrations for two tasks in our suite via crowdsourcing. You can find detailed information about the RoboTurk datasets <a class="reference internal" href="roboturk.html"><span class="doc">here</span></a>.</p>
</div>
<div class="section" id="structure-of-collected-demonstrations">
<h2>Structure of collected demonstrations<a class="headerlink" href="#structure-of-collected-demonstrations" title="Permalink to this headline">¶</a></h2>
<p>Every set of demonstrations is collected as a <code class="docutils literal notranslate"><span class="pre">demo.hdf5</span></code> file. The <code class="docutils literal notranslate"><span class="pre">demo.hdf5</span></code> file is structured as follows.</p>
<ul>
<li><p>data (group)</p>
<ul>
<li><p>date (attribute) - date of collection</p></li>
<li><p>time (attribute) - time of collection</p></li>
<li><p>repository_version (attribute) - repository version used during collection</p></li>
<li><p>env (attribute) - environment name on which demos were collected</p></li>
<li><p>demo1 (group) - group for the first demonstration (every demonstration has a group)</p>
<ul class="simple">
<li><p>model_file (attribute) - the xml string corresponding to the MJCF mujoco model</p></li>
<li><p>states (dataset) - flattened mujoco states, ordered by time</p></li>
<li><p>actions (dataset) - environment actions, ordered by time</p></li>
</ul>
</li>
<li><p>demo2 (group) - group for the second demonstration</p>
<p>…</p>
<p>(and so on)</p>
</li>
</ul>
</li>
</ul>
<p>The reason for storing mujoco states instead of raw observations is to make it easy to retrieve different kinds of observations in a postprocessing step. This also saves disk space (image datasets are much larger).</p>
</div>
<div class="section" id="using-demonstrations-for-learning">
<h2>Using Demonstrations for Learning<a class="headerlink" href="#using-demonstrations-for-learning" title="Permalink to this headline">¶</a></h2>
<p><a class="reference external" href="https://arxiv.org/abs/1802.09564">Several</a> <a class="reference external" href="https://arxiv.org/abs/1807.06919">prior</a> <a class="reference external" href="https://arxiv.org/abs/1804.02717">works</a> have demonstrated the effectiveness of altering the start state distribution of training episodes for learning RL policies. We provide a generic utility for setting various types of learning curriculums which dictate how to sample from demonstration episodes when doing an environment reset. For more information see the <code class="docutils literal notranslate"><span class="pre">DemoSamplerWrapper</span></code> class.</p>
</div>
<div class="section" id="warnings">
<h2>Warnings<a class="headerlink" href="#warnings" title="Permalink to this headline">¶</a></h2>
<p>We have verified that deterministic action playback works specifically when playing back demonstrations on the <em>same machine</em> that the demonstrations were originally collected upon. However, this means that deterministic action playback is NOT guaranteed (in fact, very unlikely) to work across platforms or even across different machines using the same OS.</p>
<p>While action playback trajectories are quite similar even if not completely identical to the original collected state trajectories, they do tend to drift over time, and should not be relied upon to accurately replicate demonstrations. Instead, we recommend directly setting states to reproduce the collected trajectories, as shown in <a class="reference external" href="https://github.com/ARISE-Initiative/robosuite/blob/master/robosuite/scripts/playback_demonstrations_from_hdf5.py">playback_demonstrations_from_hdf5</a>.</p>
</div>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="sim2real.html" class="btn btn-neutral float-right" title="Sim-to-Real Transfer" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="benchmarking.html" class="btn btn-neutral float-left" title="Benchmarking" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright Stanford University and The University of Texas at Austin 2020.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>