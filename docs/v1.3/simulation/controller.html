<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Controller &mdash; robosuite 1.3.1 documentation</title>
      <link rel="stylesheet" href="../static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../static/theme_overrides.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../" id="documentation_options" src="../static/documentation_options.js"></script>
        <script src="../static/jquery.js"></script>
        <script src="../static/underscore.js"></script>
        <script src="../static/doctools.js"></script>
        <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script src="../static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Mujoco Model" href="../modeling/mujoco_model.html" />
    <link rel="prev" title="Device" href="device.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../index.html" class="icon icon-home"> robosuite
          </a>
              <div class="version">
                1.3.1
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Introduction</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../overview.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../quickstart.html">Quick Start</a></li>
<li class="toctree-l1"><a class="reference internal" href="../demos.html">Demo Showcases</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Modules</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../modules/overview.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../modules/robots.html">Robots</a></li>
<li class="toctree-l1"><a class="reference internal" href="../modules/controllers.html">Controllers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../modules/objects.html">Objects</a></li>
<li class="toctree-l1"><a class="reference internal" href="../modules/environments.html">Environments</a></li>
<li class="toctree-l1"><a class="reference internal" href="../modules/sensors.html">Sensors</a></li>
<li class="toctree-l1"><a class="reference internal" href="../modules/devices.html">I/O Devices</a></li>
<li class="toctree-l1"><a class="reference internal" href="../modules/renderers.html">Renderers</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Simulation API</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="robot.html">Robot</a></li>
<li class="toctree-l1"><a class="reference internal" href="environment.html">Environment</a></li>
<li class="toctree-l1"><a class="reference internal" href="device.html">Device</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Controller</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#base-controller">Base Controller</a></li>
<li class="toctree-l2"><a class="reference internal" href="#joint-position-controller">Joint Position Controller</a></li>
<li class="toctree-l2"><a class="reference internal" href="#joint-velocity-controller">Joint Velocity Controller</a></li>
<li class="toctree-l2"><a class="reference internal" href="#joint-torque-controller">Joint Torque Controller</a></li>
<li class="toctree-l2"><a class="reference internal" href="#operation-space-controller">Operation Space Controller</a></li>
<li class="toctree-l2"><a class="reference internal" href="#inverse-kinematics-controller">Inverse Kinematics Controller</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Modeling API</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../modeling/mujoco_model.html">Mujoco Model</a></li>
<li class="toctree-l1"><a class="reference internal" href="../modeling/robot_model.html">Robot Model</a></li>
<li class="toctree-l1"><a class="reference internal" href="../modeling/object_model.html">Object Model</a></li>
<li class="toctree-l1"><a class="reference internal" href="../modeling/arena.html">Arena</a></li>
<li class="toctree-l1"><a class="reference internal" href="../modeling/task.html">Task</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Source API</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../source/robosuite.html">robosuite package</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Algorithms</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../algorithms/benchmarking.html">Benchmarking</a></li>
<li class="toctree-l1"><a class="reference internal" href="../algorithms/demonstrations.html">Human Demonstrations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../algorithms/sim2real.html">Sim-to-Real Transfer</a></li>
<li class="toctree-l1"><a class="reference internal" href="../algorithms/roboturk.html">RoboTurk Datasets</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Miscellaneous</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../references.html">Projects using robosuite</a></li>
<li class="toctree-l1"><a class="reference internal" href="../acknowledgement.html">Acknowledgements</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">robosuite</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
      <li>Controller</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../sources/simulation/controller.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  
<style>
/* CSS overrides for sphinx_rtd_theme */

/* 24px margin */
.nbinput.nblast.container,
.nboutput.nblast.container {
    margin-bottom: 19px;  /* padding has already 5px */
}

/* ... except between code cells! */
.nblast.container + .nbinput.container {
    margin-top: -19px;
}

.admonition > p:before {
    margin-right: 4px;  /* make room for the exclamation icon */
}

/* Fix math alignment, see https://github.com/rtfd/sphinx_rtd_theme/pull/686 */
.math {
    text-align: unset;
}
</style>
<section id="controller">
<h1>Controller<a class="headerlink" href="#controller" title="Permalink to this headline"></a></h1>
<p>Every <code class="docutils literal notranslate"><span class="pre">Robot</span></code> is equipped with a controller, which determines both the action space as well as how its
values are mapped into command torques. By default, all controllers have a pre-defined set of methods and
properities, though specific controllers may extend and / or override the default functionality found in
the base class.</p>
<section id="base-controller">
<h2>Base Controller<a class="headerlink" href="#base-controller" title="Permalink to this headline"></a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="robosuite.controllers.base_controller.Controller">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">robosuite.controllers.base_controller.</span></span><span class="sig-name descname"><span class="pre">Controller</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">sim</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">eef_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">joint_indexes</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">actuator_range</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#robosuite.controllers.base_controller.Controller" title="Permalink to this definition"></a></dt>
<dd><p>General controller interface.</p>
<p>Requires reference to mujoco sim object, eef_name of specific robot, relevant joint_indexes to that robot, and
whether an initial_joint is used for nullspace torques or not</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>sim</strong> (<em>MjSim</em>) – Simulator instance this controller will pull robot state updates from</p></li>
<li><p><strong>eef_name</strong> (<em>str</em>) – Name of controlled robot arm’s end effector (from robot XML)</p></li>
<li><p><strong>joint_indexes</strong> (<em>dict</em>) – <p>Each key contains sim reference indexes to relevant robot joint information, namely:</p>
<dl class="field-list simple">
<dt class="field-odd"><cite>’joints’</cite></dt>
<dd class="field-odd"><p>list of indexes to relevant robot joints</p>
</dd>
<dt class="field-even"><cite>’qpos’</cite></dt>
<dd class="field-even"><p>list of indexes to relevant robot joint positions</p>
</dd>
<dt class="field-odd"><cite>’qvel’</cite></dt>
<dd class="field-odd"><p>list of indexes to relevant robot joint velocities</p>
</dd>
</dl>
</p></li>
<li><p><strong>actuator_range</strong> (<em>2-tuple of array of float</em>) – 2-Tuple (low, high) representing the robot joint actuator range</p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="robosuite.controllers.base_controller.Controller.run_controller">
<em class="property"><span class="pre">abstract</span> </em><span class="sig-name descname"><span class="pre">run_controller</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#robosuite.controllers.base_controller.Controller.run_controller" title="Permalink to this definition"></a></dt>
<dd><p>Abstract method that should be implemented in all subclass controllers, and should convert a given action
into torques (pre gravity compensation) to be executed on the robot.
Additionally, resets the self.new_update flag so that the next self.update call will occur</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="robosuite.controllers.base_controller.Controller.scale_action">
<span class="sig-name descname"><span class="pre">scale_action</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">action</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#robosuite.controllers.base_controller.Controller.scale_action" title="Permalink to this definition"></a></dt>
<dd><p>Clips &#64;action to be within self.input_min and self.input_max, and then re-scale the values to be within
the range self.output_min and self.output_max</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>action</strong> (<em>Iterable</em>) – Actions to scale</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Re-scaled action</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>np.array</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="robosuite.controllers.base_controller.Controller.update">
<span class="sig-name descname"><span class="pre">update</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">force</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#robosuite.controllers.base_controller.Controller.update" title="Permalink to this definition"></a></dt>
<dd><p>Updates the state of the robot arm, including end effector pose / orientation / velocity, joint pos/vel,
jacobian, and mass matrix. By default, since this is a non-negligible computation, multiple redundant calls
will be ignored via the self.new_update attribute flag. However, if the &#64;force flag is set, the update will
occur regardless of that state of self.new_update. This base class method of &#64;run_controller resets the
self.new_update flag</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>force</strong> (<em>bool</em>) – Whether to force an update to occur or not</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="robosuite.controllers.base_controller.Controller.update_base_pose">
<span class="sig-name descname"><span class="pre">update_base_pose</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">base_pos</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">base_ori</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#robosuite.controllers.base_controller.Controller.update_base_pose" title="Permalink to this definition"></a></dt>
<dd><p>Optional function to implement in subclass controllers that will take in &#64;base_pos and &#64;base_ori and update
internal configuration to account for changes in the respective states. Useful for controllers e.g. IK, which
is based on pybullet and requires knowledge of simulator state deviations between pybullet and mujoco</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>base_pos</strong> (<em>3-tuple</em>) – x,y,z position of robot base in mujoco world coordinates</p></li>
<li><p><strong>base_ori</strong> (<em>4-tuple</em>) – x,y,z,w orientation or robot base in mujoco world coordinates</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="robosuite.controllers.base_controller.Controller.update_initial_joints">
<span class="sig-name descname"><span class="pre">update_initial_joints</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">initial_joints</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#robosuite.controllers.base_controller.Controller.update_initial_joints" title="Permalink to this definition"></a></dt>
<dd><p>Updates the internal attribute self.initial_joints. This is useful for updating changes in controller-specific
behavior, such as with OSC where self.initial_joints is used for determine nullspace actions</p>
<p>This function can also be extended by subclassed controllers for additional controller-specific updates</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>initial_joints</strong> (<em>Iterable</em>) – Array of joint position values to update the initial joints</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="robosuite.controllers.base_controller.Controller.clip_torques">
<span class="sig-name descname"><span class="pre">clip_torques</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">torques</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#robosuite.controllers.base_controller.Controller.clip_torques" title="Permalink to this definition"></a></dt>
<dd><p>Clips the torques to be within the actuator limits</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>torques</strong> (<em>Iterable</em>) – Torques to clip</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Clipped torques</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>np.array</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="robosuite.controllers.base_controller.Controller.reset_goal">
<span class="sig-name descname"><span class="pre">reset_goal</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#robosuite.controllers.base_controller.Controller.reset_goal" title="Permalink to this definition"></a></dt>
<dd><p>Resets the goal – usually by setting to the goal to all zeros, but in some cases may be different (e.g.: OSC)</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="robosuite.controllers.base_controller.Controller.nums2array">
<em class="property"><span class="pre">static</span> </em><span class="sig-name descname"><span class="pre">nums2array</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">nums</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dim</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#robosuite.controllers.base_controller.Controller.nums2array" title="Permalink to this definition"></a></dt>
<dd><p>Convert input &#64;nums into numpy array of length &#64;dim. If &#64;nums is a single number, broadcasts it to the
corresponding dimension size &#64;dim before converting into a numpy array</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>nums</strong> (<em>numeric</em><em> or </em><em>Iterable</em>) – Either single value or array of numbers</p></li>
<li><p><strong>dim</strong> (<em>int</em>) – Size of array to broadcast input to env.sim.data.actuator_force</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Array filled with values specified in &#64;nums</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>np.array</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="robosuite.controllers.base_controller.Controller.torque_compensation">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">torque_compensation</span></span><a class="headerlink" href="#robosuite.controllers.base_controller.Controller.torque_compensation" title="Permalink to this definition"></a></dt>
<dd><p>Gravity compensation for this robot arm</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>torques</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>np.array</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="robosuite.controllers.base_controller.Controller.actuator_limits">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">actuator_limits</span></span><a class="headerlink" href="#robosuite.controllers.base_controller.Controller.actuator_limits" title="Permalink to this definition"></a></dt>
<dd><p>Torque limits for this controller</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><ul class="simple">
<li><p>(np.array) minimum actuator torques</p></li>
<li><p>(np.array) maximum actuator torques</p></li>
</ul>
</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>2-tuple</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="robosuite.controllers.base_controller.Controller.control_limits">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">control_limits</span></span><a class="headerlink" href="#robosuite.controllers.base_controller.Controller.control_limits" title="Permalink to this definition"></a></dt>
<dd><p>Limits over this controller’s action space, which defaults to input min/max</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><ul class="simple">
<li><p>(np.array) minimum action values</p></li>
<li><p>(np.array) maximum action values</p></li>
</ul>
</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>2-tuple</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="robosuite.controllers.base_controller.Controller.name">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">name</span></span><a class="headerlink" href="#robosuite.controllers.base_controller.Controller.name" title="Permalink to this definition"></a></dt>
<dd><p>Name of this controller</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>controller name</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>str</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</section>
<section id="joint-position-controller">
<h2>Joint Position Controller<a class="headerlink" href="#joint-position-controller" title="Permalink to this headline"></a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="robosuite.controllers.joint_pos.JointPositionController">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">robosuite.controllers.joint_pos.</span></span><span class="sig-name descname"><span class="pre">JointPositionController</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">sim</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">eef_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">joint_indexes</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">actuator_range</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">input_max</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">input_min</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">-</span> <span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">output_max</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.05</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">output_min</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">-</span> <span class="pre">0.05</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">kp</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">50</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">damping_ratio</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">impedance_mode</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'fixed'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">kp_limits</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">(0,</span> <span class="pre">300)</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">damping_ratio_limits</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">(0,</span> <span class="pre">100)</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">policy_freq</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">20</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">qpos_limits</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">interpolator</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#robosuite.controllers.joint_pos.JointPositionController" title="Permalink to this definition"></a></dt>
<dd><p>Controller for controlling robot arm via impedance control. Allows position control of the robot’s joints.</p>
<p>NOTE: Control input actions assumed to be taken relative to the current joint positions. A given action to this
controller is assumed to be of the form: (dpos_j0, dpos_j1, … , dpos_jn-1) for an n-joint robot</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>sim</strong> (<em>MjSim</em>) – Simulator instance this controller will pull robot state updates from</p></li>
<li><p><strong>eef_name</strong> (<em>str</em>) – Name of controlled robot arm’s end effector (from robot XML)</p></li>
<li><p><strong>joint_indexes</strong> (<em>dict</em>) – <p>Each key contains sim reference indexes to relevant robot joint information, namely:</p>
<dl class="field-list simple">
<dt class="field-odd"><cite>’joints’</cite></dt>
<dd class="field-odd"><p>list of indexes to relevant robot joints</p>
</dd>
<dt class="field-even"><cite>’qpos’</cite></dt>
<dd class="field-even"><p>list of indexes to relevant robot joint positions</p>
</dd>
<dt class="field-odd"><cite>’qvel’</cite></dt>
<dd class="field-odd"><p>list of indexes to relevant robot joint velocities</p>
</dd>
</dl>
</p></li>
<li><p><strong>actuator_range</strong> (<em>2-tuple of array of float</em>) – 2-Tuple (low, high) representing the robot joint actuator range</p></li>
<li><p><strong>input_max</strong> (<em>float</em><em> or </em><em>Iterable of float</em>) – Maximum above which an inputted action will be clipped. Can be either be
a scalar (same value for all action dimensions), or a list (specific values for each dimension). If the
latter, dimension should be the same as the control dimension for this controller</p></li>
<li><p><strong>input_min</strong> (<em>float</em><em> or </em><em>Iterable of float</em>) – Minimum below which an inputted action will be clipped. Can be either be
a scalar (same value for all action dimensions), or a list (specific values for each dimension). If the
latter, dimension should be the same as the control dimension for this controller</p></li>
<li><p><strong>output_max</strong> (<em>float</em><em> or </em><em>Iterable of float</em>) – Maximum which defines upper end of scaling range when scaling an input
action. Can be either be a scalar (same value for all action dimensions), or a list (specific values for
each dimension). If the latter, dimension should be the same as the control dimension for this controller</p></li>
<li><p><strong>output_min</strong> (<em>float</em><em> or </em><em>Iterable of float</em>) – Minimum which defines upper end of scaling range when scaling an input
action. Can be either be a scalar (same value for all action dimensions), or a list (specific values for
each dimension). If the latter, dimension should be the same as the control dimension for this controller</p></li>
<li><p><strong>kp</strong> (<em>float</em><em> or </em><em>Iterable of float</em>) – positional gain for determining desired torques based upon the joint pos error.
Can be either be a scalar (same value for all action dims), or a list (specific values for each dim)</p></li>
<li><p><strong>damping_ratio</strong> (<em>float</em><em> or </em><em>Iterable of float</em>) – used in conjunction with kp to determine the velocity gain for
determining desired torques based upon the joint pos errors. Can be either be a scalar (same value for all
action dims), or a list (specific values for each dim)</p></li>
<li><p><strong>impedance_mode</strong> (<em>str</em>) – Impedance mode with which to run this controller. Options are {“fixed”, “variable”,
“variable_kp”}. If “fixed”, the controller will have fixed kp and damping_ratio values as specified by the
&#64;kp and &#64;damping_ratio arguments. If “variable”, both kp and damping_ratio will now be part of the
controller action space, resulting in a total action space of num_joints * 3. If “variable_kp”, only kp
will become variable, with damping_ratio fixed at 1 (critically damped). The resulting action space will
then be num_joints * 2.</p></li>
<li><p><strong>kp_limits</strong> (<em>2-list of float</em><em> or </em><em>2-list of Iterable of floats</em>) – Only applicable if &#64;impedance_mode is set to either
“variable” or “variable_kp”. This sets the corresponding min / max ranges of the controller action space
for the varying kp values. Can be either be a 2-list (same min / max for all kp action dims), or a 2-list
of list (specific min / max for each kp dim)</p></li>
<li><p><strong>damping_ratio_limits</strong> (<em>2-list of float</em><em> or </em><em>2-list of Iterable of floats</em>) – Only applicable if &#64;impedance_mode is
set to “variable”. This sets the corresponding min / max ranges of the controller action space for the
varying damping_ratio values. Can be either be a 2-list (same min / max for all damping_ratio action dims),
or a 2-list of list (specific min / max for each damping_ratio dim)</p></li>
<li><p><strong>policy_freq</strong> (<em>int</em>) – Frequency at which actions from the robot policy are fed into this controller</p></li>
<li><p><strong>qpos_limits</strong> (<em>2-list of float</em><em> or </em><em>2-list of Iterable of floats</em>) – Limits (rad) below and above which the magnitude
of a calculated goal joint position will be clipped. Can be either be a 2-list (same min/max value for all
joint dims), or a 2-list of list (specific min/max values for each dim)</p></li>
<li><p><strong>interpolator</strong> (<a class="reference internal" href="../source/robosuite.controllers.interpolators.html#robosuite.controllers.interpolators.base_interpolator.Interpolator" title="robosuite.controllers.interpolators.base_interpolator.Interpolator"><em>Interpolator</em></a>) – Interpolator object to be used for interpolating from the current joint position to
the goal joint position during each timestep between inputted actions</p></li>
<li><p><strong>**kwargs</strong> – Does nothing; placeholder to “sink” any additional arguments so that instantiating this controller
via an argument dict that has additional extraneous arguments won’t raise an error</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><strong>AssertionError</strong> – [Invalid impedance mode]</p>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="robosuite.controllers.joint_pos.JointPositionController.set_goal">
<span class="sig-name descname"><span class="pre">set_goal</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">action</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">set_qpos</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#robosuite.controllers.joint_pos.JointPositionController.set_goal" title="Permalink to this definition"></a></dt>
<dd><p>Sets goal based on input &#64;action. If self.impedance_mode is not “fixed”, then the input will be parsed into the
delta values to update the goal position / pose and the kp and/or damping_ratio values to be immediately updated
internally before executing the proceeding control loop.</p>
<p>Note that &#64;action expected to be in the following format, based on impedance mode!</p>
<blockquote>
<div><dl class="field-list simple">
<dt class="field-odd">Mode <cite>‘fixed’</cite></dt>
<dd class="field-odd"><p>[joint pos command]</p>
</dd>
<dt class="field-even">Mode <cite>‘variable’</cite></dt>
<dd class="field-even"><p>[damping_ratio values, kp values, joint pos command]</p>
</dd>
<dt class="field-odd">Mode <cite>‘variable_kp’</cite></dt>
<dd class="field-odd"><p>[kp values, joint pos command]</p>
</dd>
</dl>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>action</strong> (<em>Iterable</em>) – Desired relative joint position goal state</p></li>
<li><p><strong>set_qpos</strong> (<em>Iterable</em>) – If set, overrides &#64;action and sets the desired absolute joint position goal state</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><strong>AssertionError</strong> – [Invalid action dimension size]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="robosuite.controllers.joint_pos.JointPositionController.reset_goal">
<span class="sig-name descname"><span class="pre">reset_goal</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#robosuite.controllers.joint_pos.JointPositionController.reset_goal" title="Permalink to this definition"></a></dt>
<dd><p>Resets joint position goal to be current position</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="robosuite.controllers.joint_pos.JointPositionController.control_limits">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">control_limits</span></span><a class="headerlink" href="#robosuite.controllers.joint_pos.JointPositionController.control_limits" title="Permalink to this definition"></a></dt>
<dd><p>Returns the limits over this controller’s action space, overrides the superclass property
Returns the following (generalized for both high and low limits), based on the impedance mode:</p>
<blockquote>
<div><dl class="field-list simple">
<dt class="field-odd">Mode <cite>‘fixed’</cite></dt>
<dd class="field-odd"><p>[joint pos command]</p>
</dd>
<dt class="field-even">Mode <cite>‘variable’</cite></dt>
<dd class="field-even"><p>[damping_ratio values, kp values, joint pos command]</p>
</dd>
<dt class="field-odd">Mode <cite>‘variable_kp’</cite></dt>
<dd class="field-odd"><p>[kp values, joint pos command]</p>
</dd>
</dl>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><ul class="simple">
<li><p>(np.array) minimum action values</p></li>
<li><p>(np.array) maximum action values</p></li>
</ul>
</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>2-tuple</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</section>
<section id="joint-velocity-controller">
<h2>Joint Velocity Controller<a class="headerlink" href="#joint-velocity-controller" title="Permalink to this headline"></a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="robosuite.controllers.joint_vel.JointVelocityController">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">robosuite.controllers.joint_vel.</span></span><span class="sig-name descname"><span class="pre">JointVelocityController</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">sim</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">eef_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">joint_indexes</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">actuator_range</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">input_max</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">input_min</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">-</span> <span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">output_max</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">output_min</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">-</span> <span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">kp</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.25</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">policy_freq</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">20</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">velocity_limits</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">interpolator</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#robosuite.controllers.joint_vel.JointVelocityController" title="Permalink to this definition"></a></dt>
<dd><p>Controller for controlling the robot arm’s joint velocities. This is simply a P controller with desired torques
(pre gravity compensation) taken to be proportional to the velocity error of the robot joints.</p>
<p>NOTE: Control input actions assumed to be taken as absolute joint velocities. A given action to this
controller is assumed to be of the form: (vel_j0, vel_j1, … , vel_jn-1) for an n-joint robot</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>sim</strong> (<em>MjSim</em>) – Simulator instance this controller will pull robot state updates from</p></li>
<li><p><strong>eef_name</strong> (<em>str</em>) – Name of controlled robot arm’s end effector (from robot XML)</p></li>
<li><p><strong>joint_indexes</strong> (<em>dict</em>) – <p>Each key contains sim reference indexes to relevant robot joint information, namely:</p>
<dl class="field-list simple">
<dt class="field-odd"><cite>’joints’</cite></dt>
<dd class="field-odd"><p>list of indexes to relevant robot joints</p>
</dd>
<dt class="field-even"><cite>’qpos’</cite></dt>
<dd class="field-even"><p>list of indexes to relevant robot joint positions</p>
</dd>
<dt class="field-odd"><cite>’qvel’</cite></dt>
<dd class="field-odd"><p>list of indexes to relevant robot joint velocities</p>
</dd>
</dl>
</p></li>
<li><p><strong>actuator_range</strong> (<em>2-tuple of array of float</em>) – 2-Tuple (low, high) representing the robot joint actuator range</p></li>
<li><p><strong>input_max</strong> (<em>float</em><em> or </em><em>list of float</em>) – Maximum above which an inputted action will be clipped. Can be either be
a scalar (same value for all action dimensions), or a list (specific values for each dimension). If the
latter, dimension should be the same as the control dimension for this controller</p></li>
<li><p><strong>input_min</strong> (<em>float</em><em> or </em><em>list of float</em>) – Minimum below which an inputted action will be clipped. Can be either be
a scalar (same value for all action dimensions), or a list (specific values for each dimension). If the
latter, dimension should be the same as the control dimension for this controller</p></li>
<li><p><strong>output_max</strong> (<em>float</em><em> or </em><em>list of float</em>) – Maximum which defines upper end of scaling range when scaling an input
action. Can be either be a scalar (same value for all action dimensions), or a list (specific values for
each dimension). If the latter, dimension should be the same as the control dimension for this controller</p></li>
<li><p><strong>output_min</strong> (<em>float</em><em> or </em><em>list of float</em>) – Minimum which defines upper end of scaling range when scaling an input
action. Can be either be a scalar (same value for all action dimensions), or a list (specific values for
each dimension). If the latter, dimension should be the same as the control dimension for this controller</p></li>
<li><p><strong>kp</strong> (<em>float</em><em> or </em><em>list of float</em>) – velocity gain for determining desired torques based upon the joint vel errors.
Can be either be a scalar (same value for all action dims), or a list (specific values for each dim)</p></li>
<li><p><strong>policy_freq</strong> (<em>int</em>) – Frequency at which actions from the robot policy are fed into this controller</p></li>
<li><p><strong>velocity_limits</strong> (<em>2-list of float</em><em> or </em><em>2-list of list of floats</em>) – Limits (m/s) below and above which the magnitude
of a calculated goal joint velocity will be clipped. Can be either be a 2-list (same min/max value for all
joint dims), or a 2-list of list (specific min/max values for each dim)</p></li>
<li><p><strong>interpolator</strong> (<a class="reference internal" href="../source/robosuite.controllers.interpolators.html#robosuite.controllers.interpolators.base_interpolator.Interpolator" title="robosuite.controllers.interpolators.base_interpolator.Interpolator"><em>Interpolator</em></a>) – Interpolator object to be used for interpolating from the current joint velocities
to the goal joint velocities during each timestep between inputted actions</p></li>
<li><p><strong>**kwargs</strong> – Does nothing; placeholder to “sink” any additional arguments so that instantiating this controller
via an argument dict that has additional extraneous arguments won’t raise an error</p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="robosuite.controllers.joint_vel.JointVelocityController.set_goal">
<span class="sig-name descname"><span class="pre">set_goal</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">velocities</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#robosuite.controllers.joint_vel.JointVelocityController.set_goal" title="Permalink to this definition"></a></dt>
<dd><p>Sets goal based on input &#64;velocities.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>velocities</strong> (<em>Iterable</em>) – Desired joint velocities</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><strong>AssertionError</strong> – [Invalid action dimension size]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="robosuite.controllers.joint_vel.JointVelocityController.reset_goal">
<span class="sig-name descname"><span class="pre">reset_goal</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#robosuite.controllers.joint_vel.JointVelocityController.reset_goal" title="Permalink to this definition"></a></dt>
<dd><p>Resets joint velocity goal to be all zeros</p>
</dd></dl>

</dd></dl>

</section>
<section id="joint-torque-controller">
<h2>Joint Torque Controller<a class="headerlink" href="#joint-torque-controller" title="Permalink to this headline"></a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="robosuite.controllers.joint_tor.JointTorqueController">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">robosuite.controllers.joint_tor.</span></span><span class="sig-name descname"><span class="pre">JointTorqueController</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">sim</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">eef_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">joint_indexes</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">actuator_range</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">input_max</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">input_min</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">-</span> <span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">output_max</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.05</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">output_min</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">-</span> <span class="pre">0.05</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">policy_freq</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">20</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">torque_limits</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">interpolator</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#robosuite.controllers.joint_tor.JointTorqueController" title="Permalink to this definition"></a></dt>
<dd><p>Controller for controlling the robot arm’s joint torques. As the actuators at the mujoco sim level are already
torque actuators, this “controller” usually simply “passes through” desired torques, though it also includes the
typical input / output scaling and clipping, as well as interpolator features seen in other controllers classes
as well</p>
<p>NOTE: Control input actions assumed to be taken as absolute joint torques. A given action to this
controller is assumed to be of the form: (torq_j0, torq_j1, … , torq_jn-1) for an n-joint robot</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>sim</strong> (<em>MjSim</em>) – Simulator instance this controller will pull robot state updates from</p></li>
<li><p><strong>eef_name</strong> (<em>str</em>) – Name of controlled robot arm’s end effector (from robot XML)</p></li>
<li><p><strong>joint_indexes</strong> (<em>dict</em>) – <p>Each key contains sim reference indexes to relevant robot joint information, namely:</p>
<dl class="field-list simple">
<dt class="field-odd"><cite>’joints’</cite></dt>
<dd class="field-odd"><p>list of indexes to relevant robot joints</p>
</dd>
<dt class="field-even"><cite>’qpos’</cite></dt>
<dd class="field-even"><p>list of indexes to relevant robot joint positions</p>
</dd>
<dt class="field-odd"><cite>’qvel’</cite></dt>
<dd class="field-odd"><p>list of indexes to relevant robot joint velocities</p>
</dd>
</dl>
</p></li>
<li><p><strong>actuator_range</strong> (<em>2-tuple of array of float</em>) – 2-Tuple (low, high) representing the robot joint actuator range</p></li>
<li><p><strong>input_max</strong> (<em>float</em><em> or </em><em>list of float</em>) – Maximum above which an inputted action will be clipped. Can be either be
a scalar (same value for all action dimensions), or a list (specific values for each dimension). If the
latter, dimension should be the same as the control dimension for this controller</p></li>
<li><p><strong>input_min</strong> (<em>float</em><em> or </em><em>list of float</em>) – Minimum below which an inputted action will be clipped. Can be either be
a scalar (same value for all action dimensions), or a list (specific values for each dimension). If the
latter, dimension should be the same as the control dimension for this controller</p></li>
<li><p><strong>output_max</strong> (<em>float</em><em> or </em><em>list of float</em>) – Maximum which defines upper end of scaling range when scaling an input
action. Can be either be a scalar (same value for all action dimensions), or a list (specific values for
each dimension). If the latter, dimension should be the same as the control dimension for this controller</p></li>
<li><p><strong>output_min</strong> (<em>float</em><em> or </em><em>list of float</em>) – Minimum which defines upper end of scaling range when scaling an input
action. Can be either be a scalar (same value for all action dimensions), or a list (specific values for
each dimension). If the latter, dimension should be the same as the control dimension for this controller</p></li>
<li><p><strong>policy_freq</strong> (<em>int</em>) – Frequency at which actions from the robot policy are fed into this controller</p></li>
<li><p><strong>torque_limits</strong> (<em>2-list of float</em><em> or </em><em>2-list of list of floats</em>) – Limits (N-m) below and above which the magnitude
of a calculated goal joint torque will be clipped. Can be either be a 2-list (same min/max value for all
joint dims), or a 2-list of list (specific min/max values for each dim)
If not specified, will automatically set the limits to the actuator limits for this robot arm</p></li>
<li><p><strong>interpolator</strong> (<a class="reference internal" href="../source/robosuite.controllers.interpolators.html#robosuite.controllers.interpolators.base_interpolator.Interpolator" title="robosuite.controllers.interpolators.base_interpolator.Interpolator"><em>Interpolator</em></a>) – Interpolator object to be used for interpolating from the current joint torques to
the goal joint torques during each timestep between inputted actions</p></li>
<li><p><strong>**kwargs</strong> – Does nothing; placeholder to “sink” any additional arguments so that instantiating this controller
via an argument dict that has additional extraneous arguments won’t raise an error</p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="robosuite.controllers.joint_tor.JointTorqueController.set_goal">
<span class="sig-name descname"><span class="pre">set_goal</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">torques</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#robosuite.controllers.joint_tor.JointTorqueController.set_goal" title="Permalink to this definition"></a></dt>
<dd><p>Sets goal based on input &#64;torques.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>torques</strong> (<em>Iterable</em>) – Desired joint torques</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><strong>AssertionError</strong> – [Invalid action dimension size]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="robosuite.controllers.joint_tor.JointTorqueController.reset_goal">
<span class="sig-name descname"><span class="pre">reset_goal</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#robosuite.controllers.joint_tor.JointTorqueController.reset_goal" title="Permalink to this definition"></a></dt>
<dd><p>Resets joint torque goal to be all zeros (pre-compensation)</p>
</dd></dl>

</dd></dl>

</section>
<section id="operation-space-controller">
<h2>Operation Space Controller<a class="headerlink" href="#operation-space-controller" title="Permalink to this headline"></a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="robosuite.controllers.osc.OperationalSpaceController">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">robosuite.controllers.osc.</span></span><span class="sig-name descname"><span class="pre">OperationalSpaceController</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">sim</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">eef_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">joint_indexes</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">actuator_range</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">input_max</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">input_min</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">-</span> <span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">output_max</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">(0.05,</span> <span class="pre">0.05,</span> <span class="pre">0.05,</span> <span class="pre">0.5,</span> <span class="pre">0.5,</span> <span class="pre">0.5)</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">output_min</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">(-</span> <span class="pre">0.05,</span> <span class="pre">-</span> <span class="pre">0.05,</span> <span class="pre">-</span> <span class="pre">0.05,</span> <span class="pre">-</span> <span class="pre">0.5,</span> <span class="pre">-</span> <span class="pre">0.5,</span> <span class="pre">-</span> <span class="pre">0.5)</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">kp</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">150</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">damping_ratio</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">impedance_mode</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'fixed'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">kp_limits</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">(0,</span> <span class="pre">300)</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">damping_ratio_limits</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">(0,</span> <span class="pre">100)</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">policy_freq</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">20</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">position_limits</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">orientation_limits</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">interpolator_pos</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">interpolator_ori</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">control_ori</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">control_delta</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">uncouple_pos_ori</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#robosuite.controllers.osc.OperationalSpaceController" title="Permalink to this definition"></a></dt>
<dd><p>Controller for controlling robot arm via operational space control. Allows position and / or orientation control
of the robot’s end effector. For detailed information as to the mathematical foundation for this controller, please
reference <a class="reference external" href="http://khatib.stanford.edu/publications/pdfs/Khatib_1987_RA.pdf">http://khatib.stanford.edu/publications/pdfs/Khatib_1987_RA.pdf</a></p>
<p>NOTE: Control input actions can either be taken to be relative to the current position / orientation of the
end effector or absolute values. In either case, a given action to this controller is assumed to be of the form:
(x, y, z, ax, ay, az) if controlling pos and ori or simply (x, y, z) if only controlling pos</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>sim</strong> (<em>MjSim</em>) – Simulator instance this controller will pull robot state updates from</p></li>
<li><p><strong>eef_name</strong> (<em>str</em>) – Name of controlled robot arm’s end effector (from robot XML)</p></li>
<li><p><strong>joint_indexes</strong> (<em>dict</em>) – <p>Each key contains sim reference indexes to relevant robot joint information, namely:</p>
<dl class="field-list simple">
<dt class="field-odd"><cite>’joints’</cite></dt>
<dd class="field-odd"><p>list of indexes to relevant robot joints</p>
</dd>
<dt class="field-even"><cite>’qpos’</cite></dt>
<dd class="field-even"><p>list of indexes to relevant robot joint positions</p>
</dd>
<dt class="field-odd"><cite>’qvel’</cite></dt>
<dd class="field-odd"><p>list of indexes to relevant robot joint velocities</p>
</dd>
</dl>
</p></li>
<li><p><strong>actuator_range</strong> (<em>2-tuple of array of float</em>) – 2-Tuple (low, high) representing the robot joint actuator range</p></li>
<li><p><strong>input_max</strong> (<em>float</em><em> or </em><em>Iterable of float</em>) – Maximum above which an inputted action will be clipped. Can be either be
a scalar (same value for all action dimensions), or a list (specific values for each dimension). If the
latter, dimension should be the same as the control dimension for this controller</p></li>
<li><p><strong>input_min</strong> (<em>float</em><em> or </em><em>Iterable of float</em>) – Minimum below which an inputted action will be clipped. Can be either be
a scalar (same value for all action dimensions), or a list (specific values for each dimension). If the
latter, dimension should be the same as the control dimension for this controller</p></li>
<li><p><strong>output_max</strong> (<em>float</em><em> or </em><em>Iterable of float</em>) – Maximum which defines upper end of scaling range when scaling an input
action. Can be either be a scalar (same value for all action dimensions), or a list (specific values for
each dimension). If the latter, dimension should be the same as the control dimension for this controller</p></li>
<li><p><strong>output_min</strong> (<em>float</em><em> or </em><em>Iterable of float</em>) – Minimum which defines upper end of scaling range when scaling an input
action. Can be either be a scalar (same value for all action dimensions), or a list (specific values for
each dimension). If the latter, dimension should be the same as the control dimension for this controller</p></li>
<li><p><strong>kp</strong> (<em>float</em><em> or </em><em>Iterable of float</em>) – positional gain for determining desired torques based upon the pos / ori error.
Can be either be a scalar (same value for all action dims), or a list (specific values for each dim)</p></li>
<li><p><strong>damping_ratio</strong> (<em>float</em><em> or </em><em>Iterable of float</em>) – used in conjunction with kp to determine the velocity gain for
determining desired torques based upon the joint pos errors. Can be either be a scalar (same value for all
action dims), or a list (specific values for each dim)</p></li>
<li><p><strong>impedance_mode</strong> (<em>str</em>) – Impedance mode with which to run this controller. Options are {“fixed”, “variable”,
“variable_kp”}. If “fixed”, the controller will have fixed kp and damping_ratio values as specified by the
&#64;kp and &#64;damping_ratio arguments. If “variable”, both kp and damping_ratio will now be part of the
controller action space, resulting in a total action space of (6 or 3) + 6 * 2. If “variable_kp”, only kp
will become variable, with damping_ratio fixed at 1 (critically damped). The resulting action space will
then be (6 or 3) + 6.</p></li>
<li><p><strong>kp_limits</strong> (<em>2-list of float</em><em> or </em><em>2-list of Iterable of floats</em>) – Only applicable if &#64;impedance_mode is set to either
“variable” or “variable_kp”. This sets the corresponding min / max ranges of the controller action space
for the varying kp values. Can be either be a 2-list (same min / max for all kp action dims), or a 2-list
of list (specific min / max for each kp dim)</p></li>
<li><p><strong>damping_ratio_limits</strong> (<em>2-list of float</em><em> or </em><em>2-list of Iterable of floats</em>) – Only applicable if &#64;impedance_mode is
set to “variable”. This sets the corresponding min / max ranges of the controller action space for the
varying damping_ratio values. Can be either be a 2-list (same min / max for all damping_ratio action dims),
or a 2-list of list (specific min / max for each damping_ratio dim)</p></li>
<li><p><strong>policy_freq</strong> (<em>int</em>) – Frequency at which actions from the robot policy are fed into this controller</p></li>
<li><p><strong>position_limits</strong> (<em>2-list of float</em><em> or </em><em>2-list of Iterable of floats</em>) – Limits (m) below and above which the
magnitude of a calculated goal eef position will be clipped. Can be either be a 2-list (same min/max value
for all cartesian dims), or a 2-list of list (specific min/max values for each dim)</p></li>
<li><p><strong>orientation_limits</strong> (<em>2-list of float</em><em> or </em><em>2-list of Iterable of floats</em>) – Limits (rad) below and above which the
magnitude of a calculated goal eef orientation will be clipped. Can be either be a 2-list
(same min/max value for all joint dims), or a 2-list of list (specific min/mx values for each dim)</p></li>
<li><p><strong>interpolator_pos</strong> (<a class="reference internal" href="../source/robosuite.controllers.interpolators.html#robosuite.controllers.interpolators.base_interpolator.Interpolator" title="robosuite.controllers.interpolators.base_interpolator.Interpolator"><em>Interpolator</em></a>) – Interpolator object to be used for interpolating from the current position to
the goal position during each timestep between inputted actions</p></li>
<li><p><strong>interpolator_ori</strong> (<a class="reference internal" href="../source/robosuite.controllers.interpolators.html#robosuite.controllers.interpolators.base_interpolator.Interpolator" title="robosuite.controllers.interpolators.base_interpolator.Interpolator"><em>Interpolator</em></a>) – Interpolator object to be used for interpolating from the current orientation
to the goal orientation during each timestep between inputted actions</p></li>
<li><p><strong>control_ori</strong> (<em>bool</em>) – Whether inputted actions will control both pos and ori or exclusively pos</p></li>
<li><p><strong>control_delta</strong> (<em>bool</em>) – Whether to control the robot using delta or absolute commands (where absolute commands
are taken in the world coordinate frame)</p></li>
<li><p><strong>uncouple_pos_ori</strong> (<em>bool</em>) – Whether to decouple torques meant to control pos and torques meant to control ori</p></li>
<li><p><strong>**kwargs</strong> – Does nothing; placeholder to “sink” any additional arguments so that instantiating this controller
via an argument dict that has additional extraneous arguments won’t raise an error</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><strong>AssertionError</strong> – [Invalid impedance mode]</p>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="robosuite.controllers.osc.OperationalSpaceController.set_goal">
<span class="sig-name descname"><span class="pre">set_goal</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">action</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">set_pos</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">set_ori</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#robosuite.controllers.osc.OperationalSpaceController.set_goal" title="Permalink to this definition"></a></dt>
<dd><p>Sets goal based on input &#64;action. If self.impedance_mode is not “fixed”, then the input will be parsed into the
delta values to update the goal position / pose and the kp and/or damping_ratio values to be immediately updated
internally before executing the proceeding control loop.</p>
<p>Note that &#64;action expected to be in the following format, based on impedance mode!</p>
<blockquote>
<div><dl class="field-list simple">
<dt class="field-odd">Mode <cite>‘fixed’</cite></dt>
<dd class="field-odd"><p>[joint pos command]</p>
</dd>
<dt class="field-even">Mode <cite>‘variable’</cite></dt>
<dd class="field-even"><p>[damping_ratio values, kp values, joint pos command]</p>
</dd>
<dt class="field-odd">Mode <cite>‘variable_kp’</cite></dt>
<dd class="field-odd"><p>[kp values, joint pos command]</p>
</dd>
</dl>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>action</strong> (<em>Iterable</em>) – Desired relative joint position goal state</p></li>
<li><p><strong>set_pos</strong> (<em>Iterable</em>) – If set, overrides &#64;action and sets the desired absolute eef position goal state</p></li>
<li><p><strong>set_ori</strong> (<em>Iterable</em>) – IF set, overrides &#64;action and sets the desired absolute eef orientation goal state</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="robosuite.controllers.osc.OperationalSpaceController.reset_goal">
<span class="sig-name descname"><span class="pre">reset_goal</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#robosuite.controllers.osc.OperationalSpaceController.reset_goal" title="Permalink to this definition"></a></dt>
<dd><p>Resets the goal to the current state of the robot</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="robosuite.controllers.osc.OperationalSpaceController.control_limits">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">control_limits</span></span><a class="headerlink" href="#robosuite.controllers.osc.OperationalSpaceController.control_limits" title="Permalink to this definition"></a></dt>
<dd><p>Returns the limits over this controller’s action space, overrides the superclass property
Returns the following (generalized for both high and low limits), based on the impedance mode:</p>
<blockquote>
<div><dl class="field-list simple">
<dt class="field-odd">Mode <cite>‘fixed’</cite></dt>
<dd class="field-odd"><p>[joint pos command]</p>
</dd>
<dt class="field-even">Mode <cite>‘variable’</cite></dt>
<dd class="field-even"><p>[damping_ratio values, kp values, joint pos command]</p>
</dd>
<dt class="field-odd">Mode <cite>‘variable_kp’</cite></dt>
<dd class="field-odd"><p>[kp values, joint pos command]</p>
</dd>
</dl>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><ul class="simple">
<li><p>(np.array) minimum action values</p></li>
<li><p>(np.array) maximum action values</p></li>
</ul>
</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>2-tuple</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</section>
<section id="inverse-kinematics-controller">
<h2>Inverse Kinematics Controller<a class="headerlink" href="#inverse-kinematics-controller" title="Permalink to this headline"></a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="robosuite.controllers.ik.InverseKinematicsController">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">robosuite.controllers.ik.</span></span><span class="sig-name descname"><span class="pre">InverseKinematicsController</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">sim</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">eef_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">joint_indexes</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">robot_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">actuator_range</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">eef_rot_offset</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bullet_server_id</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">policy_freq</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">20</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">load_urdf</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ik_pos_limit</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ik_ori_limit</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">interpolator_pos</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">interpolator_ori</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">converge_steps</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">5</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#robosuite.controllers.ik.InverseKinematicsController" title="Permalink to this definition"></a></dt>
<dd><p>Controller for controlling robot arm via inverse kinematics. Allows position and orientation control of the
robot’s end effector.</p>
<p>Inverse kinematics solving is handled by pybullet.</p>
<p>NOTE: Control input actions are assumed to be relative to the current position / orientation of the end effector
and are taken as the array (x_dpos, y_dpos, z_dpos, x_rot, y_rot, z_rot).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>sim</strong> (<em>MjSim</em>) – Simulator instance this controller will pull robot state updates from</p></li>
<li><p><strong>eef_name</strong> (<em>str</em>) – Name of controlled robot arm’s end effector (from robot XML)</p></li>
<li><p><strong>joint_indexes</strong> (<em>dict</em>) – <p>Each key contains sim reference indexes to relevant robot joint information, namely:</p>
<dl class="field-list simple">
<dt class="field-odd"><cite>’joints’</cite></dt>
<dd class="field-odd"><p>list of indexes to relevant robot joints</p>
</dd>
<dt class="field-even"><cite>’qpos’</cite></dt>
<dd class="field-even"><p>list of indexes to relevant robot joint positions</p>
</dd>
<dt class="field-odd"><cite>’qvel’</cite></dt>
<dd class="field-odd"><p>list of indexes to relevant robot joint velocities</p>
</dd>
</dl>
</p></li>
<li><p><strong>robot_name</strong> (<em>str</em>) – Name of robot being controlled. Can be {“Sawyer”, “Panda”, or “Baxter”}</p></li>
<li><p><strong>actuator_range</strong> (<em>2-tuple of array of float</em>) – 2-Tuple (low, high) representing the robot joint actuator range</p></li>
<li><p><strong>eef_rot_offset</strong> (<em>4-array</em>) – Quaternion (x,y,z,w) representing rotational offset between the final
robot arm link coordinate system and the end effector coordinate system (i.e: the gripper)</p></li>
<li><p><strong>policy_freq</strong> (<em>int</em>) – Frequency at which actions from the robot policy are fed into this controller</p></li>
<li><p><strong>ik_pos_limit</strong> (<em>float</em>) – Limit (meters) above which the magnitude of a given action’s
positional inputs will be clipped</p></li>
<li><p><strong>ik_ori_limit</strong> (<em>float</em>) – Limit (radians) above which the magnitude of a given action’s
orientation inputs will be clipped</p></li>
<li><p><strong>interpolator</strong> (<a class="reference internal" href="../source/robosuite.controllers.interpolators.html#robosuite.controllers.interpolators.base_interpolator.Interpolator" title="robosuite.controllers.interpolators.base_interpolator.Interpolator"><em>Interpolator</em></a>) – Interpolator object to be used for interpolating from the current state to
the goal state during each timestep between inputted actions</p></li>
<li><p><strong>converge_steps</strong> (<em>int</em>) – How many iterations to run the pybullet inverse kinematics solver to converge to a
solution</p></li>
<li><p><strong>**kwargs</strong> – Does nothing; placeholder to “sink” any additional arguments so that instantiating this controller
via an argument dict that has additional extraneous arguments won’t raise an error</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><strong>AssertionError</strong> – [Unsupported robot]</p>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="robosuite.controllers.ik.InverseKinematicsController.setup_inverse_kinematics">
<span class="sig-name descname"><span class="pre">setup_inverse_kinematics</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">load_urdf</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#robosuite.controllers.ik.InverseKinematicsController.setup_inverse_kinematics" title="Permalink to this definition"></a></dt>
<dd><p>This function is responsible for doing any setup for inverse kinematics.</p>
<p>Inverse Kinematics maps end effector (EEF) poses to joint angles that are necessary to achieve those poses.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>load_urdf</strong> (<em>bool</em>) – specifies whether the robot urdf should be loaded into the sim. Useful flag that
should be cleared in the case of multi-armed robots which might have multiple IK controller instances
but should all reference the same (single) robot urdf within the bullet sim</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><strong>ValueError</strong> – [Invalid eef id]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="robosuite.controllers.ik.InverseKinematicsController.sync_state">
<span class="sig-name descname"><span class="pre">sync_state</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#robosuite.controllers.ik.InverseKinematicsController.sync_state" title="Permalink to this definition"></a></dt>
<dd><p>Syncs the internal Pybullet robot state to the joint positions of the
robot being controlled.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="robosuite.controllers.ik.InverseKinematicsController.sync_ik_robot">
<span class="sig-name descname"><span class="pre">sync_ik_robot</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">joint_positions</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">simulate</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sync_last</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#robosuite.controllers.ik.InverseKinematicsController.sync_ik_robot" title="Permalink to this definition"></a></dt>
<dd><p>Force the internal robot model to match the provided joint angles.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>joint_positions</strong> (<em>Iterable</em>) – Array of joint positions. Default automatically updates to
current mujoco joint pos state</p></li>
<li><p><strong>simulate</strong> (<em>bool</em>) – If True, actually use physics simulation, else
write to physics state directly.</p></li>
<li><p><strong>sync_last</strong> (<em>bool</em>) – If False, don’t sync the last joint angle. This
is useful for directly controlling the roll at the end effector.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="robosuite.controllers.ik.InverseKinematicsController.ik_robot_eef_joint_cartesian_pose">
<span class="sig-name descname"><span class="pre">ik_robot_eef_joint_cartesian_pose</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#robosuite.controllers.ik.InverseKinematicsController.ik_robot_eef_joint_cartesian_pose" title="Permalink to this definition"></a></dt>
<dd><p>Calculates the current cartesian pose of the last joint of the ik robot with respect to the base frame as
a (pos, orn) tuple where orn is a x-y-z-w quaternion</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><ul class="simple">
<li><p>(np.array) position</p></li>
<li><p>(np.array) orientation</p></li>
</ul>
</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>2-tuple</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="robosuite.controllers.ik.InverseKinematicsController.get_control">
<span class="sig-name descname"><span class="pre">get_control</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dpos</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rotation</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">update_targets</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#robosuite.controllers.ik.InverseKinematicsController.get_control" title="Permalink to this definition"></a></dt>
<dd><p>Returns joint velocities to control the robot after the target end effector
position and orientation are updated from arguments &#64;dpos and &#64;rotation.
If no arguments are provided, joint velocities will be computed based
on the previously recorded target.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>dpos</strong> (<em>np.array</em>) – a 3 dimensional array corresponding to the desired
change in x, y, and z end effector position.</p></li>
<li><p><strong>rotation</strong> (<em>np.array</em>) – a rotation matrix of shape (3, 3) corresponding
to the desired rotation from the current orientation of the end effector.</p></li>
<li><p><strong>update_targets</strong> (<em>bool</em>) – whether to update ik target pos / ori attributes or not</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>a flat array of joint velocity commands to apply to try and achieve the desired input control.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>np.array</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="robosuite.controllers.ik.InverseKinematicsController.inverse_kinematics">
<span class="sig-name descname"><span class="pre">inverse_kinematics</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">target_position</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">target_orientation</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#robosuite.controllers.ik.InverseKinematicsController.inverse_kinematics" title="Permalink to this definition"></a></dt>
<dd><p>Helper function to do inverse kinematics for a given target position and
orientation in the PyBullet world frame.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>target_position</strong> (<em>3-tuple</em>) – desired position</p></li>
<li><p><strong>target_orientation</strong> (<em>4-tuple</em>) – desired orientation quaternion</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>list of size &#64;num_joints corresponding to the joint angle solution.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>list</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="robosuite.controllers.ik.InverseKinematicsController.joint_positions_for_eef_command">
<span class="sig-name descname"><span class="pre">joint_positions_for_eef_command</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dpos</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rotation</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">update_targets</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#robosuite.controllers.ik.InverseKinematicsController.joint_positions_for_eef_command" title="Permalink to this definition"></a></dt>
<dd><p>This function runs inverse kinematics to back out target joint positions
from the provided end effector command.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>dpos</strong> (<em>np.array</em>) – a 3 dimensional array corresponding to the desired
change in x, y, and z end effector position.</p></li>
<li><p><strong>rotation</strong> (<em>np.array</em>) – a rotation matrix of shape (3, 3) corresponding
to the desired rotation from the current orientation of the end effector.</p></li>
<li><p><strong>update_targets</strong> (<em>bool</em>) – whether to update ik target pos / ori attributes or not</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A list of size &#64;num_joints corresponding to the target joint angles.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>list</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="robosuite.controllers.ik.InverseKinematicsController.bullet_base_pose_to_world_pose">
<span class="sig-name descname"><span class="pre">bullet_base_pose_to_world_pose</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">pose_in_base</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#robosuite.controllers.ik.InverseKinematicsController.bullet_base_pose_to_world_pose" title="Permalink to this definition"></a></dt>
<dd><p>Convert a pose in the base frame to a pose in the world frame.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>pose_in_base</strong> (<em>2-tuple</em>) – a (pos, orn) tuple.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>a (pos, orn) tuple reflecting robot pose in world coordinates</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>2-tuple</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="robosuite.controllers.ik.InverseKinematicsController.set_goal">
<span class="sig-name descname"><span class="pre">set_goal</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">delta</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">set_ik</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#robosuite.controllers.ik.InverseKinematicsController.set_goal" title="Permalink to this definition"></a></dt>
<dd><p>Sets the internal goal state of this controller based on &#64;delta</p>
<p>Note that this controller wraps a VelocityController, and so determines the desired velocities
to achieve the inputted pose, and sets its internal setpoint in terms of joint velocities</p>
<p>TODO: Add feature so that using &#64;set_ik automatically sets the target values to these absolute values</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>delta</strong> (<em>Iterable</em>) – Desired relative position / orientation goal state</p></li>
<li><p><strong>set_ik</strong> (<em>Iterable</em>) – If set, overrides &#64;delta and sets the desired global position / orientation goal state</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="robosuite.controllers.ik.InverseKinematicsController.reset_goal">
<span class="sig-name descname"><span class="pre">reset_goal</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#robosuite.controllers.ik.InverseKinematicsController.reset_goal" title="Permalink to this definition"></a></dt>
<dd><p>Resets the goal to the current pose of the robot</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="robosuite.controllers.ik.InverseKinematicsController.control_limits">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">control_limits</span></span><a class="headerlink" href="#robosuite.controllers.ik.InverseKinematicsController.control_limits" title="Permalink to this definition"></a></dt>
<dd><p>The limits over this controller’s action space, as specified by self.ik_pos_limit and self.ik_ori_limit
and overriding the superclass method</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><ul class="simple">
<li><p>(np.array) minimum control values</p></li>
<li><p>(np.array) maximum control values</p></li>
</ul>
</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>2-tuple</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="robosuite.controllers.ik.InverseKinematicsController._clip_ik_input">
<span class="sig-name descname"><span class="pre">_clip_ik_input</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dpos</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rotation</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#robosuite.controllers.ik.InverseKinematicsController._clip_ik_input" title="Permalink to this definition"></a></dt>
<dd><p>Helper function that clips desired ik input deltas into a valid range.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>dpos</strong> (<em>np.array</em>) – a 3 dimensional array corresponding to the desired
change in x, y, and z end effector position.</p></li>
<li><p><strong>rotation</strong> (<em>np.array</em>) – relative rotation in scaled axis angle form (ax, ay, az)
corresponding to the (relative) desired orientation of the end effector.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul class="simple">
<li><p>(np.array) clipped dpos</p></li>
<li><p>(np.array) clipped rotation</p></li>
</ul>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>2-tuple</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="robosuite.controllers.ik.InverseKinematicsController._make_input">
<span class="sig-name descname"><span class="pre">_make_input</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">action</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">old_quat</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#robosuite.controllers.ik.InverseKinematicsController._make_input" title="Permalink to this definition"></a></dt>
<dd><p>Helper function that returns a dictionary with keys dpos, rotation from a raw input
array. The first three elements are taken to be displacement in position, and a
quaternion indicating the change in rotation with respect to &#64;old_quat. Additionally clips &#64;action as well</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>action</strong> (<em>np.array</em>) – [dx, dy, dz, ax, ay, az] (orientation in
scaled axis-angle form)</p></li>
<li><p><strong>old_quat</strong> (<em>np.array</em>) – </p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="robosuite.controllers.ik.InverseKinematicsController._get_current_error">
<em class="property"><span class="pre">static</span> </em><span class="sig-name descname"><span class="pre">_get_current_error</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">current</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">set_point</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#robosuite.controllers.ik.InverseKinematicsController._get_current_error" title="Permalink to this definition"></a></dt>
<dd><p>Returns an array of differences between the desired joint positions and current
joint positions. Useful for PID control.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>current</strong> (<em>np.array</em>) – the current joint positions</p></li>
<li><p><strong>set_point</strong> (<em>np.array</em>) – the joint positions that are desired as a numpy array</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>the current error in the joint positions</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>np.array</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="device.html" class="btn btn-neutral float-left" title="Device" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="../modeling/mujoco_model.html" class="btn btn-neutral float-right" title="Mujoco Model" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright Stanford University and The University of Texas at Austin 2024.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>